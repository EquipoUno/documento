%=========================================================
\chapter{Modelo del comportamiento}

%\Instrucciones{}


%---------------------------------------------------------
%\section{Diagrama de CU}

 	%\begin{figure}[h!]
	%	\centering
	%		\includegraphics[scale=0.4]{images/MObras.png}
	%	\caption{Casos de uso para el prototipo I}
	%\end{figure}

%\Instrucciones{}

%=========================================================
\chapter{Modelo detallado del comportamiento} 

\Instrucciones{Detallar cada CU: Tabla descriptiva, Tray. Principal y alternativas, diagrama de estados (si es necesario).}

%Módulo de Obras
%\cfinput{cu17/cu}
\begin{itemize}

\item ID: CU1\_1.
\item Nombre: Iniciar sesión como dependiente.
\item Descripcion: Los dependientes están a cargo de la entrega de medicamentos, así como la generación de recibos para la compra de los mismos. Para poder acceder a éstas opciones del sistema, el dependiente debe iniciar sesión con su cuenta de tipo "Dependiente".
\item Actor: Dependiente.
\item Entradas: Nombre de usuario y contraseña.
\item Salidas: IUCompra.
\item Origen: Teclado.
\item Destino: Pantalla.
\item Precondiciones: Tener una cuenta de tipo "Dependiente" registrada en el sistema.
\item Postcondiciones: El actor tendrá acceso a las opciones que un dependiente de la farmacia tiene
\item Errores: No hay internet. El servidor está apagado.
\item Observaciones: -----
\item Version: 1.0
\item Volatilidad: Baja
\item Madurez: Media-Alta

\item Trayectoria Principal:
\begin{enumerate}
    \item  El actor ingresa nombre de usuario en la IULogin.
    \item  El acctor ingresa la contraseña de la cuenta en la IULogin .
    \item  El sistema verifica que exista cuenta de tipo "Dependiente" con el nombre de usuario ingresado.
    \item  El sistema verifica que la contraseña ingresada coincida con la de la cuenta encontrada. [Tray-alt DatosIncorrectos]
    \item  El sistema otorga el acceso y le muestra la IUCompra al actor.
    \item  Fin del CU1.\\
\end{enumerate}

\end{itemize}

\begin{itemize}

\item ID: CU1\_2.
\item Nombre: Iniciar sesión como Proveedor.
\item Descripcion: Los cajeros están a cargo del stock de los medicamentos. Aumentarlo en caso de que se hayan agotado.
Para poder realizar esto en el sistema, el proveedor deberá iniciar sesión con su cuenta de tipo "Proveedor".
\item Actor: Proveedor.
\item Entradas: Nombre de usuario y contraseña.
\item Salidas: IUProv.
\item Origen: Teclado.
\item Destino: Pantalla.
\item Precondiciones: Tener una cuenta de tipo "Proveedor" registrada en el sistema.
\item Postcondiciones: El actor tendrá acceso a las opciones que un proveedor tiene.
\item Errores: No hay internet. El servidor está apagado.
\item Observaciones: -----
\item Version: 1.0
\item Volatilidad: Baja
\item Madurez: Media-Alta

\item Trayectoria Principal:
\begin{enumerate}
    \item  El actor ingresa nombre de usuario en la IULogin.
    \item  El acctor ingresa la contraseña de la cuenta en la IULogin .
    \item  El sistema verifica que exista cuenta de tipo "Proveedor" con el nombre de usuario ingresado.
    \item  El sistema verifica que la contraseña ingresada coincida con la de la cuenta encontrada. [Tray-alt DatosIncorrectos]
    \item  El sistema otorga el acceso y le muestra la IUProv al actor.
    \item  Fin del CU1\_2.\\
\end{enumerate}

\end{itemize}

\begin{itemize}

\item ID: CU1\_3.
\item Nombre: Iniciar sesión como cajero.
\item Descripcion: Los cajeros, encargados de finalizar transacciones, deberan iniciar sesión con su cuenta de tipo "Cajero" para poder tener acceso a ésta acción.
\item Actor: Cajero.
\item Entradas: Nombre de usuario y contraseña.
\item Salidas: IUCaja.
\item Origen: Teclado.
\item Destino: Pantalla.
\item Precondiciones: Tener una cuenta de tipo "Cajero" registrada en el sistema.
\item Postcondiciones: El actor tendrá acceso a las opciones que un Cajero tiene.
\item Errores: No hay internet. El servidor está apagado.
\item Observaciones: -----
\item Version: 1.0
\item Volatilidad: Baja
\item Madurez: Media-Alta

\item Trayectoria Principal:
\begin{enumerate}
    \item  El actor ingresa nombre de usuario en la IULogin.
    \item  El acctor ingresa la contraseña de la cuenta en la IULogin .
    \item  El sistema verifica que exista cuenta de tipo "Cajero" con el nombre de usuario ingresado.
    \item  El sistema verifica que la contraseña ingresada coincida con la de la cuenta encontrada. [Tray-alt DatosIncorrectos]
    \item  El sistema otorga el acceso y le muestra la IUCaja al actor.
    \item  Fin del CU1\_3.
\end{enumerate}
\medskip
\begin{center}\item[Tray-alt DatosIncorrectos:]\end{center}
    \item Condiciones: El sistema no encuentra coincidencias de usuario y password.
    \begin{enumerate}
        \item[2: ] El sistema muestra el mensaje ERRDatosIncorrectos.
        \item[3: ] El actor regresa al paso 1 del CU1.
        \item[5: ] Fin de la trayectoria.\\
    \end{enumerate}
\end{itemize}

\begin{itemize}
    
\item ID: CU2.
\item Nombre: Efectuar Compra.
\item Descripcion: El dependiente podrá registrar una compra de medicamentos descritos en una receta e imprimir  un recibo para que el cliente pueda pagarlo en caja, y tras ésto, darle los medicamentos que solicitó.
\item Actor: Dependiente.
\item Entradas: IDs y cantidades de medicamento.
\item Salidas: IUSubtotal, ERRDatosIncorrectos, ERRCamposVacios, ERRMedNoExiste, ERRCantidadInv, ERRAbastecerReceta..
\item Origen: Teclado.
\item Destino: Pantalla y recibo.
\item Precondiciones: Tener una receta expedida en un consultorio médico de la clinica. 
		Tener suficientes medicamentos en el almacén para poder surtir la receta.
\item Postcondiciones:Se registrará una transacción pendiente y el cliente recibirá un recibo de pago.
\item Errores: No hay internet. El servidor está apagado.
\item Observaciones: -----
\item Version: 1.0
\item Volatilidad: Baja
\item Madurez: Media-Alta

\item Trayectoria Principal:
\begin{enumerate}
    \item El actor introdue el ID del medicamento en la IUCompra.
    \item  El actor ingresa la cantidad del medicamento que indica la receta, en la IUCompra. [Tray-alt AgregarMasMedicamentos][Tray-alt AgregarMed][Tray-alt EliminarMed].
    \item  El actor selecciona la opción "Comprar". [Tray-alt CamposVacios][Tray-alt MedicamentoInexistente][Tray-alt CantidadInvalida][Tray-alt StockOut].
    \item  El sistema muestra la IUSubtotal. [Tray-alt CancelarCompra]
    \item  El actor selecciona la opción "Aceptar"
    \item  El sistema actualiza el nuevo stock de los medicamentos, imprime un recibo con el folio de la transaccion pendiente.
    \item FIN DEL CU2
\end{enumerate}

\begin{center}\item [Tray-alt AgregarMed]\end{center}
    \item Condiciones: El actor da click en la opción "Agregar".
    \begin{enumerate}
        \item El sistema agrega un renglón en la IUCompra para poder agregar información de otro medicamento.
        \item El actor regresa al paso 1 de la trayectoria principal.
        \item Fin de la trayectoria.\\
    \end{enumerate}
    
\begin{center}\item [Tray-alt EliminarMed:]\end{center}
    \item Condiciones: El actor selecciona la opción "Eliminar".
    \begin{enumerate}
        \item El sistema elimina de la IUCompra el renglón completo donde esté ubicado el botón "Eliminar" que el actor presionó.
        \item El actor regresa al paso 1 de la trayectoria principal.
        \item Fin de la trayectoria.\\
    \end{enumerate}

\begin{center}\item [Tray-alt CamposVacios:]\end{center}
    \item Condiciones: El actor deja al menos un campo vacío en la IUCompra.
    \begin{enumerate}
        \item El sistema muestra el mensaje ERRCamposVacios
        \item El actor regresa al paso 1 del CU2.
        \item Fin de la trayectoria.\\
    \end{enumerate}
    
\begin{center}\item [Tray-alt MedicamentoInexistente:]\end{center}
    \item Condiciones:  El sistema no encuentra ningún medicamento con el ID ingresado por el actor.
    \begin{enumerate}
        \item El sistema muestra el mensaje ERRMedNoExiste.
        \item El actor regresa al paso 1 del CU2.
        \item Fin de la trayectoria.\\
    \end{enumerate}

\begin{center}\item [Tray-alt CantidadInvalida:]\end{center}
    \item Condiciones:  El actor no introduce un número como cantidad en la IUCompra.
    \begin{enumerate}
        \item El sistema muestra el mensaje ERRCantidadInv.
        \item El actor regresa al paso 1 del CU2.
        \item Fin de la trayectoria.\\
    \end{enumerate}
    
\begin{center}\item [Tray-alt StockOut:]\end{center}
    \item Condiciones:  El stock de la farmacia no alcanza a abastecer todos los medicamentos de la receta.
    \begin{enumerate}
        \item El sistema muestra el mensaje ERRAbastecerReceta.
        \item El actor regresa al paso 1 del CU2.
        \item Fin de la trayectoria.\\
    \end{enumerate}
    
\begin{center}\item [Tray-alt CancelarCompra:]\end{center}
    \item Condiciones:  El actor selecciona "Cancelar" en la IUSubtotal.
    \begin{enumerate}
        \item El actor regresa al paso 1 del CU1.
        \item El sistema elimina toda la información ingresada de los campos de texto.
        \item Fin de la trayectoria.\\
    \end{enumerate}


\end{itemize}


\begin{itemize}

\item ID: CU3.
\item Nombre: Consultar Stock.
\item Descripcion: El dependiente también será capaz de revisar el stock de un medicamento, en caso de que no pueda efectuar
una compra y reciba el mensaje ERRAbastecerReceta.
\item Actor: Dependiente.
\item Entradas: ID de medicamento.
\item Salidas: Cantidad del medicamento almacenado solicitado. ERRMedNoExiste, OKStockMedicamento.
\item Origen: Teclado.
\item Destino: Pantalla.
\item Precondiciones: Tener el medicamento a buscar, registrado en el sistema.
\item Postcondiciones: ------
\item Errores: No hay internet. El servidor está caido.
\item Observaciones: -----
\item Version: 1.0
\item Volatilidad: Baja
\item Madurez: Media-Alta

\item Trayectoria Principal:
\begin{enumerate}
    \item El actor selecciona la opción "Consultar" del menú superior de la IUCompra.
    \item  El sistema muestra la IUConsulta.
    \item  El actor introdue el ID del medicamento en la IUConsulta.
    \item El sistema muestra el mensaje OKStockMedicamento.
    \item  El actor selecciona la opción "Aceptar" [Tray-alt MedicamentoInexistente].
    \item  EEl sistema muestra la IUConsulta.
    \item FIN DEL CU3.
\end{enumerate}
\medskip
\begin{center}\item[Tray-alt MedicamentoInexistente:]\end{center}
    \item Condiciones:El sistema no encuentra ningún medicamento con el ID ingresado por el actor.
    \begin{enumerate}
        \item[2: ] El sistema muestra el mensaje ERRMedNoExiste.
        \item[3: ] El actor regresa al paso 2 del CU3.
        \item[5: ] Fin de la trayectoria.\\
    \end{enumerate}


\item ID: CU4.
\item Nombre: Buscar medicamento.
\item Descripcion: El dependiente podrá buscar información de un medicamento por medio de un ID o de una sustancia activa dados..
\item Actor: Dependiente.
\item Entradas: ID de medicamento o sustanca activa.
\item Salidas: Información de medicamento/s. OKDatosMedicamento, ERRCampoVacio.
\item Origen: Teclado.
\item Destino: Pantalla y recibo.
\item Precondiciones:  Tener medicamentos registrados en el sistema que coincidan con la búsqueda, al menos uno 
en el caso de la búsqueda por sustancia activa.
\item Postcondiciones: ----
\item Errores: No hay internet. El servidor está caido.
\item Observaciones: -----
\item Version: 1.0
\item Volatilidad: Baja
\item Madurez: Media-Alta

\item Trayectoria Principal:
\begin{enumerate}
    \item El actor selecciona la opción "Buscar" de la IUCompra.
    \item  El sistema muestra la IUBusqueda.[Tray-alt BusquedaID][Tray-alt BusquedaSustancia].
    \item FIN DEL CU4.
\end{enumerate}

\begin{center}\item [Tray-alt BusquedaID]\end{center}
    \item Condiciones: El actor decide buscar medicamento por su ID.
    \begin{enumerate}
        \item El actor introduce el ID del medicamento a buscar.
        \item El actor selecciona la opcion "Buscar por ID". [Tray-alt CampoVacio][Tray-alt MedicamentoInexistente].
        \item El sistema le muestra el mensaje OKDatosMedicamento.
        \item Fin de la trayectoria.\\
    \end{enumerate}
    
\begin{center}\item [Tray-alt BusquedaSustancia:]\end{center}
    \item Condiciones: El actor decide buscar medicamentos con la misma sustancia activa.
    \begin{enumerate}
        \item EAl actor introduce el nombre (o parte) de la sustancia activa a buscar.
        \item El actor selecciona la opción "Buscar por sustancia". [Tray-alt CampoVacio].
        \item El sistema muestra la IUTablaMedicamentos.
        \item Fin de la trayectoria.\\
    \end{enumerate}

\begin{center}\item [Tray-alt CampoVacio:]\end{center}
    \item Condiciones: El actor deja al un campo vacío en la IUBusqueda.
    \begin{enumerate}
        \item El sistema muestra el mensaje ERRCampoVacios.
        \item El actor regresa al paso 1 del CU4.
        \item Fin de la trayectoria.\\
    \end{enumerate}


\item ID: CU5.
\item Nombre: Pago de transaccion.
\item Descripcion:El cajero podrá finalizar transacciones pendientes (consulta o pago por medicamentos) por medio del folio de la misma.
En el caso de los medicamentos, el cajero sellará el recibo otorgado por el cliente y se lo devolerá.
\item Actor: Cajero.
\item Entradas: ID transaccion, monto recibo.
\item Salidas: Cantidad de dinero a devoler. ERRCambioInsuf.
\item Origen: Teclado.
\item Destino: Pantalla y sello en recibo.
\item Precondiciones:  Tener una transacción pendiente en el sistema.
\item Postcondiciones: La transacción pasará a un status "Pagado".
\item Errores: No hay internet. El servidor está caido.
\item Observaciones: -----
\item Version: 1.0
\item Volatilidad: Baja
\item Madurez: Media-Alta

\item Trayectoria Principal:
\begin{enumerate}
    \item El actor introdue el folio de la receta en la IUCaja.
    \item  El actor recibe del cliente, un monto de dinero.
    \item El actor introduce la cantidad recibida en el campo "Monto" de la IUCaja.
    \item El actor selecciona la opción "Aceptar" [Tray-alt CambioInsuficiente].
    \item El sistema actualiza el nuevo stock de los medicamentos comprados, el nuevo monto de dinero almacenado en la caja, y actualiza el status de la transaccion de "Pendiente" a "Pagado".
    \item FIN DEL CU5.
\end{enumerate}

\begin{center}\item [Tray-alt CambioInsuficiente]\end{center}
    \item Condiciones:El cambio que se le debe devolver al cliente, es mayor a la cantidad que se encuentra actualmente en la caja.
    \begin{enumerate}
        \item El sistema muestra el mensaje ERRCambioInsuf.
        \item El actor regresa al paso 1 del CU5.
        \item Fin de la trayectoria.\\
    \end{enumerate}


\item ID: CU6.
\item Nombre: Pago de medicamentos.
\item Descripcion:El cliente, con el recibo otorgado en la farmacia, se dirige a la caja para poder pagar los medicamentos
solicitados. Se le devolverá el recibo sellado, con el cual podrá recoger los medicamentos en la farmacia.
\item Actor: Cliente.
\item Entradas: -----
\item Salidas: -----
\item Origen: Actor.
\item Destino: Caja.
\item Precondiciones:  Tener un recibo expedido por la farmacia.
\item Postcondiciones: El recibo expedido por la farmacia será sellado por el cajero.
\item Errores: No hay internet. El servidor está caido.
\item Observaciones: -----
\item Version: 1.0
\item Volatilidad: Baja
\item Madurez: Media-Alta

\item Trayectoria Principal:
\begin{enumerate}
    \item El actor se dirige a la caja con el recibo otorgado por la farmacia.
    \item  El actor le da al cajero una cantidad suficiente para poder cubir el precio del recibo.
    \item El cajero le devuelve al actor el recibo ya sellado y la diferencia de dinero entre el monto dado por el cliente y el monto del recibo.
    \item FIN de la trayectoria principal.
\end{enumerate}

\item ID: CU7.
\item Nombre: Agregar Medicamento.
\item Descripcion:Un proveedor se encarga de suministrar de medicamentos a la farmacia. Asímismo el proveedor
podrá registrar estos cambios de stock en el sistema.
\item Actor: Proveedor.
\item Entradas: ID y cantidad del medicamento a agregar.
\item Salidas: OKNuevoStock.
\item Origen: Teclado.
\item Destino: Pantalla.
\item Precondiciones: El medicamento al que se le desea aumentar el stock debe estar registrado en el sistema.
\item Postcondiciones: El stock del medicamento aumentará, de acuerdo a la cantidad ingresada por el actor.
\item Errores: No hay internet. El servidor está caido.
\item Observaciones: -----
\item Version: 1.0
\item Volatilidad: Baja
\item Madurez: Media-Alta

\item Trayectoria Principal:
\begin{enumerate}
    \item El actor introduce el ID del medicamento cuyo stock se desea aumentar, en la IUProv.
    \item  El actor ingresa la cantidad que se desea agregar a ese medicamento.
    \item El actor selecciona la opcion "Agregar". [Tray-alt MedicamentoInexistente].
    \item El sistema suma el stock actual más la cantidad ingresada, y lo pone como nuevo stock del medicamento ingresado.
    \item El sistema muestra  el mensaje OKNuevoStock.
    \item FIN DEL CU7.
\end{enumerate}

\begin{center}\item [Tray-alt MedicamentoInexistente]\end{center}
    \item Condiciones:El sistema no encuentra ningún medicamento con el ID ingresado por el actor.
    \begin{enumerate}
        \item El sistema muestra el mensaje ERRMedNoExiste.
        \item El actor regresa al paso 2 del CU3.
        \item Fin de la trayectoria.\\
    \end{enumerate}

\end{itemize}